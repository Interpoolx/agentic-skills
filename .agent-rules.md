# Project Rules for AI Agent

- Follow the existing code style and architecture of the project.

## Documentation Rule
- Always add JSDoc comments to new or undocumented functions. Ensure parameters and return types are clearly described.

## D1 Database Rules
- Always declare `FOREIGN KEY` constraints explicitly in `CREATE TABLE` statements for automatic dependency handling.
- Test database changes locally with `npm run db:pull` before pushing to remote with `npm run db:push`.
- Never use `BEGIN TRANSACTION` or `COMMIT` in D1 SQL files - D1 handles transactions automatically.
- Avoid circular foreign key dependencies unless one FK allows NULL or uses `ON DELETE SET NULL`.
- Use migrations for schema changes instead of manual database edits.
- Never suggest `--no-backup` flag for production operations.
- Table names starting with `_cf_`, `sqlite_`, or `_` are automatically excluded from sync operations.